{% extends 'base.html' %}

{% block content %}
    <h1>Cars</h1>
    <div class="jumbotron">
        <!-- car_list.html -->
    <form method="get">
        <table class="table table-borderless">
            <tr>
                <td><label>Model:</label></td>
                <td>{{ filter.form.model }}</td>
                <td><label>Brand:</label></td>
                <td>{{ filter.form.brand }}</td>
            </tr>
            <tr>
                <td><label>Colour:</label></td>
                <td>{{ filter.form.colour }}</td>
                <td><label>Condition:</label></td>
                <td>{{ filter.form.condition }}</td>
            </tr>
            <tr>
                <td colspan="4">
                    <label for="id_search">Search</label>
                    <input type="text" name="search" id="id_search" class="form-control" value="{{ request.GET.search }}">
                </td>
            </tr>
        </table>
        <button type="submit" class="btn btn-primary">Filter</button>
        <a href="{% url 'homepage' %}" class="btn btn-secondary">Clear Filter</a>
    </form>
    </div>
    <table class="table">
        <tr>
            <th>ID</th>
            <th>Model</th>
            <th>Colour</th>
            <th>Brand</th>
            <th>Condition</th>
            <th>No. of previous owners</th>
            <th></th>
        </tr>
        {% for d in data %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ d.model }}</td>
            <td>{{ d.colour }}</td>
            <td>{{ d.brand }}</td>
            <td>{{ d.condition }}</td>
            <td>{{ d.no_previous_owners }}</td>
            <td><a class="nav-link" href="{% url 'cardetails' id=d.id %}">Details</a></td>
        </tr>
        {% endfor %}
    </table>
    <!-- Pagination links -->
    <div class="pagination" style="margin: 20px 0;">
        <span class="step-links">
            {% if data.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ data.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ data.number }} of {{ data.paginator.num_pages }}.
            </span>

            {% if data.has_next %}
                <a href="?page={{ data.next_page_number }}">next</a>
                <a href="?page={{ data.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
    {% if user.is_authenticated %}
    <a class="btn btn-primary" href="{% url 'addcar' %}">Add Car</a>
    {% endif %}
    <div class="clear">&nbsp;</div>
{% endblock content %}
